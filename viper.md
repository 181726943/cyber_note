# Viper

[帮助文档](https://www.yuque.com/vipersec/help)

## 实时输出

- 模块结果：输出参数，结果信息
- 平台日志：关键操作通知，运行过程中的日志信息

## 任务列表

- 显示当前有多少任务正在运行

## 监听载荷

- 与meterpreter中的payload类型类似
- 监听
  - 在MSF原生的hander/payload基础上，增加了两项功能
    - 增加虚拟监听的概念，在内网渗透的某些场景中(如注入shellcode，spawn进程，AB网正向hander)，快捷调用已有监听配置，无需实际建立网络监听或网络连接
    - 虚拟监听和实际监听可相互转化
  - 虚拟监听：将设置好的配置监听存储在缓存中，并不在服务器中建立实际运行的监听，便于后续快速启动监听；系统重启后仍然存在，可用于鱼叉钓鱼，持久化
  - 虚拟监听和实际监听可通过虚拟化，实例化相互转化
- 载荷
  - 通过监听中的生成载荷按钮，windows类型载荷为源码编译版本，Linux为elf类型
  - 选择下方生成载荷按钮可手动输入配置生成载荷；自动监听--生成载荷后自动添加对应的监听

## 监听防火墙

设置IP黑白名单达到监听特定类型的IP

## WebDelivery

与`MSF`的`exploit/multi/script/web _delivery`功能相同，用于一句话加载payload

## 文件列表

- 文件上传下载预览
- 文件上传到服务器后，默认提供网络下载功能，会提示各种版本的一句话下载命令

## 网络拓扑

汇总端口扫描，历史session上线信息，当前路由信息

## 自动编排

- 新session(权限)上线时，会自动按照顺序执行自动编排中配置好的模块
- 单一主机最大权限数量，防止陷入死循环

## 内网代理

基于`MSF`的`socks4a/socks5`代理模块继承而来，Viper将内网路由，端口转发，内网代理集中控制

- 路由路径：所有主机路由信息，不存在对应路由表示直连
- 路由列表：所有Session中的路由
- 端口转发：所有Session中的端口转发配置
- 内网代理：可添加`socks4a`,`socks5`两种代理,`socks5`不支持`udp`;代理使用的路由基于`内网路由`

## 凭证列表

获得的密码信息

## msfconsole

Metasploit console 控制台

## 权限操作

- 权限信息

  - 通过生成的Session选择权限信息
  - 进程列表

- 文件管理

  - 可直接查看<100kb的文件
  - 文件新建上传下载
  - 带参执行可执行文件(无回显)

- 内网路由

  - Metasploit中的route

- 端口转发

  - 正向：VPS端口转发到内网某端口连接内网服务

  - 反向：内网IP某端口转发到VPS

    利用内网的主机作为跳板控制其他主机

## 主机操作

获取主机信息，开放端口，存在漏洞等

## Viper运行模块

[官方文档](https://www.yuque.com/vipersec/module)

